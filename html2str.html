<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>html转cpp字符串</title>
  <style>
    textarea {
      width: 90%;
      height: 15rem;
    }
  </style>
</head>

<body>
  <h1>html转cpp字符串</h1>
  <h3>输入</h3>
  <div>
    <textarea id="ipt"></textarea>
  </div>
  <h3>输出</h3>
  <div>
    <textarea id="opt"></textarea>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.1/dist/jquery.min.js"></script>

  <script>
    $(() => {
      $('#ipt').keyup(e => {
        let ipt = $(e.currentTarget).val()

        let opt = "";
        // opt = ipt.replaceAll('\n', '');
        opt = cstr_encode(ipt)

        $('#opt').val(opt)
      })
    })

    function cstr_encode(input) {
      var output = "\"";
      var splitLines = false;
      var escapePercent = false;
      // var splitLines = document.frmConvert.chbSplitLines.checked;
      // var escapePercent = document.frmConvert.chbEscapePercent.checked;
      for (i = 0; i < input.length; i++) {
        switch (input[i]) {
          case '\f':
            output += "\\f";
            break;
          case '\n':
            if (splitLines) {
              output += "\\n\"\n\"";
            } else {
              output += "\\n";
            }
            break;
          case '\r':
            output += "\\r";
            break;
          case '\t':
            output += "\\t";
            break;
          case '\"':
            output += "\\\"";
            break;
          case '\\':
            output += "\\\\";
            break;
          case '%':
            if (escapePercent) {
              output += "%";
            } else {
              output += "%";
            }
            break;
            // case ' ':
            //   output += "";
            // break;
          default:
            output += input[i];
            break;
        }
      }
      output += "\"";
      return output;
    }
  </script>
  <script>
    var _hmt = _hmt || [];
    (function () {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?f31161b739fb2146bfdec69fa544e4a2";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>

</body>

</html>